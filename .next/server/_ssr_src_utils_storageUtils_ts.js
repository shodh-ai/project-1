"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_utils_storageUtils_ts";
exports.ids = ["_ssr_src_utils_storageUtils_ts"];
exports.modules = {

/***/ "(ssr)/./src/utils/storageUtils.ts":
/*!***********************************!*\
  !*** ./src/utils/storageUtils.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compressImageDataUrl: () => (/* binding */ compressImageDataUrl),\n/* harmony export */   estimateLocalStorageUsage: () => (/* binding */ estimateLocalStorageUsage),\n/* harmony export */   optimizeCanvasDataForStorage: () => (/* binding */ optimizeCanvasDataForStorage),\n/* harmony export */   safeLocalStorage: () => (/* binding */ safeLocalStorage)\n/* harmony export */ });\n/**\n * Utility functions to help with localStorage optimization and management\n */ /**\n * Compresses image data in a canvas state object to reduce localStorage usage.\n * This function will resize/compress any large image URLs in the canvas elements.\n */ function optimizeCanvasDataForStorage(canvasData) {\n    return canvasData.map((element)=>{\n        // Clone the element to avoid modifying the original\n        const optimizedElement = {\n            ...element\n        };\n        // If it's an image element with a data URL\n        if (element.type === \"image\" && typeof element.url === \"string\" && element.url.startsWith(\"data:image\")) {\n            // Replace with a compressed version\n            optimizedElement.url = compressImageDataUrl(element.url, 0.7, 800); // 70% quality, max 800px\n        }\n        // Also check metadata for image data\n        if (element.metadata) {\n            const newMetadata = {\n                ...element.metadata\n            };\n            // Check for originalImage in metadata (often holds a base64 image)\n            if (typeof newMetadata.originalImage === \"string\" && newMetadata.originalImage.startsWith(\"data:image\")) {\n                newMetadata.originalImage = compressImageDataUrl(newMetadata.originalImage, 0.6, 400); // More aggressive compression for metadata\n            }\n            optimizedElement.metadata = newMetadata;\n        }\n        return optimizedElement;\n    });\n}\n/**\n * Compresses a data URL image by resizing and reducing quality.\n * @param dataUrl The original data URL\n * @param quality Quality factor (0-1)\n * @param maxDimension Maximum width or height\n * @returns Compressed data URL\n */ function compressImageDataUrl(dataUrl, quality = 0.8, maxDimension = 1024) {\n    try {\n        // If the data URL is already small, don't process it\n        if (dataUrl.length < 10000) {\n            return dataUrl;\n        }\n        // Create temporary image and canvas in memory\n        const img = document.createElement(\"img\");\n        img.src = dataUrl;\n        // Create a canvas element to draw the resized image\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n            console.warn(\"Unable to get canvas context for compression\");\n            return dataUrl;\n        }\n        // Calculate new dimensions while maintaining aspect ratio\n        let width = img.width;\n        let height = img.height;\n        if (width > height && width > maxDimension) {\n            height = Math.round(height * maxDimension / width);\n            width = maxDimension;\n        } else if (height > maxDimension) {\n            width = Math.round(width * maxDimension / height);\n            height = maxDimension;\n        }\n        // Set canvas size to the new dimensions\n        canvas.width = width;\n        canvas.height = height;\n        // Draw the resized image on the canvas\n        ctx.drawImage(img, 0, 0, width, height);\n        // Convert to compressed data URL\n        return canvas.toDataURL(\"image/jpeg\", quality);\n    } catch (error) {\n        console.error(\"Error compressing image:\", error);\n        // Return original if compression fails\n        return dataUrl;\n    }\n}\n/**\n * Safely stores data in localStorage with size checks\n * @param key localStorage key\n * @param data Data to store\n * @returns true if successful, false if failed\n */ function safeLocalStorage(key, data) {\n    try {\n        // Check data size\n        const sizeInMB = data.length * 2 / 1024 / 1024; // Rough estimation of string size in MB\n        if (sizeInMB > 4) {\n            console.warn(`Data for ${key} is very large (${sizeInMB.toFixed(2)}MB), may exceed localStorage limits`);\n        }\n        // Try to store it\n        localStorage.setItem(key, data);\n        return true;\n    } catch (error) {\n        console.error(`Failed to save data to localStorage for key ${key}:`, error);\n        return false;\n    }\n}\n/**\n * Estimate the current localStorage usage as a percentage of available space\n * This is approximate since browsers don't expose exact quota information\n */ function estimateLocalStorageUsage() {\n    try {\n        // Get all keys\n        const keys = Object.keys(localStorage);\n        let totalSize = 0;\n        // Calculate total size of all items\n        keys.forEach((key)=>{\n            const value = localStorage.getItem(key);\n            if (value) {\n                totalSize += key.length + value.length;\n            }\n        });\n        // Convert to MB (approximate)\n        const sizeInMB = totalSize * 2 / 1024 / 1024;\n        // Estimate quota (most browsers have 5-10MB)\n        const estimatedQuota = 5; // Conservative estimate in MB\n        // Return as percentage\n        return Math.min(100, sizeInMB / estimatedQuota * 100);\n    } catch (error) {\n        console.error(\"Error estimating localStorage usage:\", error);\n        return 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBRUEsa0JBQWtCO1FBQ2xCQyxhQUFhQyxPQUFPLENBQUNMLEtBQUtDO1FBQzFCLE9BQU87SUFDVCxFQUFFLE9BQU9ILE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLENBQUMsNENBQTRDLEVBQUVFLElBQUksQ0FBQyxDQUFDLEVBQUVGO1FBQ3JFLE9BQU87SUFDVDtBQUNGO0FBRUE7OztDQUdDLEdBQ00sU0FBU1E7SUFDZCxJQUFJO1FBQ0YsZUFBZTtRQUNmLE1BQU1DLE9BQU9DLE9BQU9ELElBQUksQ0FBQ0g7UUFDekIsSUFBSUssWUFBWTtRQUVoQixvQ0FBb0M7UUFDcENGLEtBQUtHLE9BQU8sQ0FBQ1YsQ0FBQUE7WUFDWCxNQUFNVyxRQUFRUCxhQUFhUSxPQUFPLENBQUNaO1lBQ25DLElBQUlXLE9BQU87Z0JBQ1RGLGFBQWFULElBQUlsQixNQUFNLEdBQUc2QixNQUFNN0IsTUFBTTtZQUN4QztRQUNGO1FBRUEsOEJBQThCO1FBQzlCLE1BQU1vQixXQUFXTyxZQUFZLElBQUksT0FBTztRQUV4Qyw2Q0FBNkM7UUFDN0MsTUFBTUksaUJBQWlCLEdBQUcsOEJBQThCO1FBRXhELHVCQUF1QjtRQUN2QixPQUFPbkIsS0FBS29CLEdBQUcsQ0FBQyxLQUFLLFdBQVlELGlCQUFrQjtJQUNyRCxFQUFFLE9BQU9mLE9BQU87UUFDZFIsUUFBUVEsS0FBSyxDQUFDLHdDQUF3Q0E7UUFDdEQsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmltYS1wcm9qZWN0Ly4vc3JjL3V0aWxzL3N0b3JhZ2VVdGlscy50cz85YjY5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMgdG8gaGVscCB3aXRoIGxvY2FsU3RvcmFnZSBvcHRpbWl6YXRpb24gYW5kIG1hbmFnZW1lbnRcbiAqL1xuXG4vKipcbiAqIENvbXByZXNzZXMgaW1hZ2UgZGF0YSBpbiBhIGNhbnZhcyBzdGF0ZSBvYmplY3QgdG8gcmVkdWNlIGxvY2FsU3RvcmFnZSB1c2FnZS5cbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXNpemUvY29tcHJlc3MgYW55IGxhcmdlIGltYWdlIFVSTHMgaW4gdGhlIGNhbnZhcyBlbGVtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9wdGltaXplQ2FudmFzRGF0YUZvclN0b3JhZ2UoY2FudmFzRGF0YTogYW55W10pOiBhbnlbXSB7XG4gIHJldHVybiBjYW52YXNEYXRhLm1hcChlbGVtZW50ID0+IHtcbiAgICAvLyBDbG9uZSB0aGUgZWxlbWVudCB0byBhdm9pZCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsXG4gICAgY29uc3Qgb3B0aW1pemVkRWxlbWVudCA9IHsgLi4uZWxlbWVudCB9O1xuICAgIFxuICAgIC8vIElmIGl0J3MgYW4gaW1hZ2UgZWxlbWVudCB3aXRoIGEgZGF0YSBVUkxcbiAgICBpZiAoZWxlbWVudC50eXBlID09PSAnaW1hZ2UnICYmIHR5cGVvZiBlbGVtZW50LnVybCA9PT0gJ3N0cmluZycgJiYgZWxlbWVudC51cmwuc3RhcnRzV2l0aCgnZGF0YTppbWFnZScpKSB7XG4gICAgICAvLyBSZXBsYWNlIHdpdGggYSBjb21wcmVzc2VkIHZlcnNpb25cbiAgICAgIG9wdGltaXplZEVsZW1lbnQudXJsID0gY29tcHJlc3NJbWFnZURhdGFVcmwoZWxlbWVudC51cmwsIDAuNywgODAwKTsgLy8gNzAlIHF1YWxpdHksIG1heCA4MDBweFxuICAgIH1cbiAgICBcbiAgICAvLyBBbHNvIGNoZWNrIG1ldGFkYXRhIGZvciBpbWFnZSBkYXRhXG4gICAgaWYgKGVsZW1lbnQubWV0YWRhdGEpIHtcbiAgICAgIGNvbnN0IG5ld01ldGFkYXRhID0geyAuLi5lbGVtZW50Lm1ldGFkYXRhIH07XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBvcmlnaW5hbEltYWdlIGluIG1ldGFkYXRhIChvZnRlbiBob2xkcyBhIGJhc2U2NCBpbWFnZSlcbiAgICAgIGlmICh0eXBlb2YgbmV3TWV0YWRhdGEub3JpZ2luYWxJbWFnZSA9PT0gJ3N0cmluZycgJiYgbmV3TWV0YWRhdGEub3JpZ2luYWxJbWFnZS5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHtcbiAgICAgICAgbmV3TWV0YWRhdGEub3JpZ2luYWxJbWFnZSA9IGNvbXByZXNzSW1hZ2VEYXRhVXJsKG5ld01ldGFkYXRhLm9yaWdpbmFsSW1hZ2UsIDAuNiwgNDAwKTsgLy8gTW9yZSBhZ2dyZXNzaXZlIGNvbXByZXNzaW9uIGZvciBtZXRhZGF0YVxuICAgICAgfVxuICAgICAgXG4gICAgICBvcHRpbWl6ZWRFbGVtZW50Lm1ldGFkYXRhID0gbmV3TWV0YWRhdGE7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBvcHRpbWl6ZWRFbGVtZW50O1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb21wcmVzc2VzIGEgZGF0YSBVUkwgaW1hZ2UgYnkgcmVzaXppbmcgYW5kIHJlZHVjaW5nIHF1YWxpdHkuXG4gKiBAcGFyYW0gZGF0YVVybCBUaGUgb3JpZ2luYWwgZGF0YSBVUkxcbiAqIEBwYXJhbSBxdWFsaXR5IFF1YWxpdHkgZmFjdG9yICgwLTEpXG4gKiBAcGFyYW0gbWF4RGltZW5zaW9uIE1heGltdW0gd2lkdGggb3IgaGVpZ2h0XG4gKiBAcmV0dXJucyBDb21wcmVzc2VkIGRhdGEgVVJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wcmVzc0ltYWdlRGF0YVVybChkYXRhVXJsOiBzdHJpbmcsIHF1YWxpdHkgPSAwLjgsIG1heERpbWVuc2lvbiA9IDEwMjQpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIC8vIElmIHRoZSBkYXRhIFVSTCBpcyBhbHJlYWR5IHNtYWxsLCBkb24ndCBwcm9jZXNzIGl0XG4gICAgaWYgKGRhdGFVcmwubGVuZ3RoIDwgMTAwMDApIHtcbiAgICAgIHJldHVybiBkYXRhVXJsO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgdGVtcG9yYXJ5IGltYWdlIGFuZCBjYW52YXMgaW4gbWVtb3J5XG4gICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaW1nLnNyYyA9IGRhdGFVcmw7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgY2FudmFzIGVsZW1lbnQgdG8gZHJhdyB0aGUgcmVzaXplZCBpbWFnZVxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIFxuICAgIGlmICghY3R4KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBnZXQgY2FudmFzIGNvbnRleHQgZm9yIGNvbXByZXNzaW9uJyk7XG4gICAgICByZXR1cm4gZGF0YVVybDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIG5ldyBkaW1lbnNpb25zIHdoaWxlIG1haW50YWluaW5nIGFzcGVjdCByYXRpb1xuICAgIGxldCB3aWR0aCA9IGltZy53aWR0aDtcbiAgICBsZXQgaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICBcbiAgICBpZiAod2lkdGggPiBoZWlnaHQgJiYgd2lkdGggPiBtYXhEaW1lbnNpb24pIHtcbiAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICogbWF4RGltZW5zaW9uIC8gd2lkdGgpO1xuICAgICAgd2lkdGggPSBtYXhEaW1lbnNpb247XG4gICAgfSBlbHNlIGlmIChoZWlnaHQgPiBtYXhEaW1lbnNpb24pIHtcbiAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh3aWR0aCAqIG1heERpbWVuc2lvbiAvIGhlaWdodCk7XG4gICAgICBoZWlnaHQgPSBtYXhEaW1lbnNpb247XG4gICAgfVxuICAgIFxuICAgIC8vIFNldCBjYW52YXMgc2l6ZSB0byB0aGUgbmV3IGRpbWVuc2lvbnNcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIFxuICAgIC8vIERyYXcgdGhlIHJlc2l6ZWQgaW1hZ2Ugb24gdGhlIGNhbnZhc1xuICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICBcbiAgICAvLyBDb252ZXJ0IHRvIGNvbXByZXNzZWQgZGF0YSBVUkxcbiAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIHF1YWxpdHkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbXByZXNzaW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAvLyBSZXR1cm4gb3JpZ2luYWwgaWYgY29tcHJlc3Npb24gZmFpbHNcbiAgICByZXR1cm4gZGF0YVVybDtcbiAgfVxufVxuXG4vKipcbiAqIFNhZmVseSBzdG9yZXMgZGF0YSBpbiBsb2NhbFN0b3JhZ2Ugd2l0aCBzaXplIGNoZWNrc1xuICogQHBhcmFtIGtleSBsb2NhbFN0b3JhZ2Uga2V5XG4gKiBAcGFyYW0gZGF0YSBEYXRhIHRvIHN0b3JlXG4gKiBAcmV0dXJucyB0cnVlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIGZhaWxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZUxvY2FsU3RvcmFnZShrZXk6IHN0cmluZywgZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgZGF0YSBzaXplXG4gICAgY29uc3Qgc2l6ZUluTUIgPSBkYXRhLmxlbmd0aCAqIDIgLyAxMDI0IC8gMTAyNDsgLy8gUm91Z2ggZXN0aW1hdGlvbiBvZiBzdHJpbmcgc2l6ZSBpbiBNQlxuICAgIFxuICAgIGlmIChzaXplSW5NQiA+IDQpIHtcbiAgICAgIGNvbnNvbGUud2FybihgRGF0YSBmb3IgJHtrZXl9IGlzIHZlcnkgbGFyZ2UgKCR7c2l6ZUluTUIudG9GaXhlZCgyKX1NQiksIG1heSBleGNlZWQgbG9jYWxTdG9yYWdlIGxpbWl0c2ApO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgdG8gc3RvcmUgaXRcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIGRhdGEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBzYXZlIGRhdGEgdG8gbG9jYWxTdG9yYWdlIGZvciBrZXkgJHtrZXl9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBFc3RpbWF0ZSB0aGUgY3VycmVudCBsb2NhbFN0b3JhZ2UgdXNhZ2UgYXMgYSBwZXJjZW50YWdlIG9mIGF2YWlsYWJsZSBzcGFjZVxuICogVGhpcyBpcyBhcHByb3hpbWF0ZSBzaW5jZSBicm93c2VycyBkb24ndCBleHBvc2UgZXhhY3QgcXVvdGEgaW5mb3JtYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzdGltYXRlTG9jYWxTdG9yYWdlVXNhZ2UoKTogbnVtYmVyIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgYWxsIGtleXNcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKTtcbiAgICBsZXQgdG90YWxTaXplID0gMDtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgdG90YWwgc2l6ZSBvZiBhbGwgaXRlbXNcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0b3RhbFNpemUgKz0ga2V5Lmxlbmd0aCArIHZhbHVlLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBDb252ZXJ0IHRvIE1CIChhcHByb3hpbWF0ZSlcbiAgICBjb25zdCBzaXplSW5NQiA9IHRvdGFsU2l6ZSAqIDIgLyAxMDI0IC8gMTAyNDtcbiAgICBcbiAgICAvLyBFc3RpbWF0ZSBxdW90YSAobW9zdCBicm93c2VycyBoYXZlIDUtMTBNQilcbiAgICBjb25zdCBlc3RpbWF0ZWRRdW90YSA9IDU7IC8vIENvbnNlcnZhdGl2ZSBlc3RpbWF0ZSBpbiBNQlxuICAgIFxuICAgIC8vIFJldHVybiBhcyBwZXJjZW50YWdlXG4gICAgcmV0dXJuIE1hdGgubWluKDEwMCwgKHNpemVJbk1CIC8gZXN0aW1hdGVkUXVvdGEpICogMTAwKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlc3RpbWF0aW5nIGxvY2FsU3RvcmFnZSB1c2FnZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJvcHRpbWl6ZUNhbnZhc0RhdGFGb3JTdG9yYWdlIiwiY2FudmFzRGF0YSIsIm1hcCIsImVsZW1lbnQiLCJvcHRpbWl6ZWRFbGVtZW50IiwidHlwZSIsInVybCIsInN0YXJ0c1dpdGgiLCJjb21wcmVzc0ltYWdlRGF0YVVybCIsIm1ldGFkYXRhIiwibmV3TWV0YWRhdGEiLCJvcmlnaW5hbEltYWdlIiwiZGF0YVVybCIsInF1YWxpdHkiLCJtYXhEaW1lbnNpb24iLCJsZW5ndGgiLCJpbWciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiY29uc29sZSIsIndhcm4iLCJ3aWR0aCIsImhlaWdodCIsIk1hdGgiLCJyb3VuZCIsImRyYXdJbWFnZSIsInRvRGF0YVVSTCIsImVycm9yIiwic2FmZUxvY2FsU3RvcmFnZSIsImtleSIsImRhdGEiLCJzaXplSW5NQiIsInRvRml4ZWQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZXN0aW1hdGVMb2NhbFN0b3JhZ2VVc2FnZSIsImtleXMiLCJPYmplY3QiLCJ0b3RhbFNpemUiLCJmb3JFYWNoIiwidmFsdWUiLCJnZXRJdGVtIiwiZXN0aW1hdGVkUXVvdGEiLCJtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/storageUtils.ts\n");

/***/ })

};
;